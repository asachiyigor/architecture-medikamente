# Задание 1. Анализ безопасности системы компании «Медикаменте»

## 1. Диаграммы потоков данных (DFD)

Диаграммы потоков данных представлены в файле `data-flow-diagrams.drawio`. Каждый бизнес-процесс вынесен на отдельную страницу:

| Страница | Процесс |
|----------|---------|
| Page-1 | Запись пациента на приём |
| Page-2 | Медицинский приём и ведение карты |
| Page-3 | Оплата услуг |
| Page-4 | Учёт ТМЦ и бухгалтерия |
| Page-5 | Лабораторные анализы |
| Page-6 | Доработанные потоки (To-Be) с мерами защиты |

---

## 2. Аудит мер по обеспечению безопасности данных

### 2.1 Сопоставление с требованиями 152-ФЗ и принципами Privacy by Design

| Требование / Принцип | Текущее состояние | Соответствие |
|---|---|---|
| **152-ФЗ ст. 6**: Получение согласия субъекта на обработку ПДн | Нет формализованного процесса получения и хранения согласий | НЕ СООТВЕТСТВУЕТ |
| **152-ФЗ ст. 19**: Меры по обеспечению безопасности ПДн при обработке | Отсутствует шифрование, контроль доступа ограничен доменной аутентификацией | НЕ СООТВЕТСТВУЕТ |
| **152-ФЗ ст. 21**: Обязанность оператора при обращении субъекта об удалении данных | Нет процедуры удаления данных по запросу пациента | НЕ СООТВЕТСТВУЕТ |
| **152-ФЗ ст. 22**: Уведомление Роскомнадзора об обработке ПДн | Неизвестно, зарегистрирована ли компания как оператор ПДн | ТРЕБУЕТ ПРОВЕРКИ |
| **PbD: Проактивный подход** | Безопасность не встроена в процессы, реактивное реагирование | НЕ СООТВЕТСТВУЕТ |
| **PbD: Конфиденциальность по умолчанию** | Все файлы на общем диске доступны всем сотрудникам | НЕ СООТВЕТСТВУЕТ |
| **PbD: Встроенность в дизайн** | Нет архитектурных решений по защите данных | НЕ СООТВЕТСТВУЕТ |
| **PbD: Комплексная безопасность** | Нет шифрования at rest / in transit, нет политики утилизации данных | НЕ СООТВЕТСТВУЕТ |
| **PbD: Прозрачность** | Нет аудита действий, нет логирования доступа к данным | НЕ СООТВЕТСТВУЕТ |
| **PbD: Уважение к конфиденциальности** | Нет механизма управления согласиями и настройками конфиденциальности | НЕ СООТВЕТСТВУЕТ |
| **Data Minimization** | Собираются избыточные данные без обоснования необходимости | НЕ СООТВЕТСТВУЕТ |
| **Data Lineage** | Невозможно отследить происхождение и трансформации данных | НЕ СООТВЕТСТВУЕТ |

---

### 2.2 Список проблемных зон

#### Проблема 1. Отсутствие классификации и тегирования данных
**Описание:** Данные компании не разделены по категориям конфиденциальности. Медицинские карты (врачебная тайна), платёжные данные, персональные данные пациентов (ФИО, СНИЛС, контакты) и административная информация хранятся вместе на общем сетевом диске без разграничения.

**Риск:** Невозможно применить дифференцированные меры защиты. Нарушение принципа Data Minimization.

**Затронутые процессы:** Все бизнес-процессы компании.

---

#### Проблема 2. Отсутствие контроля доступа (RBAC/ABAC)
**Описание:** Помимо доменной аутентификации через Active Directory, нет ограничений на доступ к данным. Любой авторизованный сотрудник потенциально может получить доступ к любым файлам на общем диске, включая медицинские карты других отделов.

**Риск:** Кассир может просмотреть медицинскую карту пациента, сотрудник склада — платёжные данные. Нарушение принципа наименьших привилегий.

**Затронутые процессы:** Все процессы с доступом к общему диску.

---

#### Проблема 3. Отсутствие шифрования данных
**Описание:** Данные хранятся в открытом виде (Excel, JPG, PDF) без шифрования at rest. Передача данных внутри локальной сети не защищена шифрованием in transit. Файлы 1С работают в файловом режиме и также не зашифрованы.

**Риск:** При физическом доступе к серверу или перехвате сетевого трафика данные могут быть прочитаны злоумышленником.

**Затронутые процессы:** Все процессы хранения и передачи данных.

---

#### Проблема 4. Отсутствие аудита и логирования
**Описание:** Нет системы логирования действий пользователей. Невозможно установить, кто, когда и к каким данным обращался. Результаты работы с данными «сохраняются и читаются в файлах и IT-системах без аудита действий».

**Риск:** Невозможно обнаружить несанкционированный доступ или утечку данных. Невозможно провести расследование инцидента.

**Затронутые процессы:** Все процессы.

---

#### Проблема 5. Отсутствие управления согласиями (Consent Management)
**Описание:** Нет формализованного процесса получения, хранения и управления согласиями пациентов на обработку персональных данных. Пациент не может отозвать согласие или узнать, какие данные обрабатываются.

**Риск:** Прямое нарушение ст. 6 и ст. 9 ФЗ-152 «О персональных данных». Штрафы до 18 млн руб. для юридических лиц.

**Затронутые процессы:** Запись пациента, ведение медкарт, оплата.

---

#### Проблема 6. Ручная обработка данных без валидации
**Описание:** Все операции с данными производятся вручную. Данные вводятся в Excel без валидации формата, полноты и корректности. Двойной учёт кассирами (Excel + 1С) создаёт риск рассогласования.

**Риск:** Высокая вероятность ошибок ввода, дублирования и потери данных. Несогласованность данных между системами.

**Затронутые процессы:** Запись пациента, оплата, складской учёт, бухгалтерия.

---

#### Проблема 7. Отсутствие политики удаления и хранения данных
**Описание:** Нет определённых сроков хранения различных категорий данных. Нет процедуры безопасного удаления данных по истечении срока хранения или по запросу пациента (право на забвение).

**Риск:** Накопление устаревших данных увеличивает поверхность атаки. Нарушение требований 152-ФЗ о прекращении обработки данных.

**Затронутые процессы:** Все процессы хранения данных.

---

#### Проблема 8. Физическая уязвимость инфраструктуры
**Описание:** Единственный физический сервер расположен в том же здании, что и офис. Нет информации о резервном копировании с шифрованием, нет плана восстановления после аварий (DRP).

**Риск:** Физическое повреждение сервера (пожар, затопление, кража) приведёт к полной потере данных.

**Затронутые процессы:** Все процессы (единая точка отказа).

---

#### Проблема 9. Отсутствие контроля потоков данных между системами
**Описание:** «Внутренние потоки данных между IT-продуктами никак не контролируются». Нет мониторинга передачи данных между Excel, 1С:Бухгалтерия, 1С:Торговля и склад, общим диском.

**Риск:** Невозможно обнаружить аномальные потоки данных (массовое копирование, экспорт). Нет Data Lineage.

**Затронутые процессы:** Все межсистемные взаимодействия.

---

#### Проблема 10. Отсутствие защиты каналов связи с ККМ
**Описание:** Контрольно-кассовые машины связаны с сервером через TCP/IP и компоненту 1С по технологии OLE. Передача данных не шифруется.

**Риск:** Перехват платёжных данных в локальной сети. Возможность MITM-атаки.

**Затронутые процессы:** Оплата услуг.

---

#### Проблема 11. Двойной учёт и дублирование данных
**Описание:** Кассиры ведут двойной учёт — в Excel и 1С. Журналы приёма, учёт пациентов и медицинские карты дублируются в Excel и в виде сканов.

**Риск:** Увеличение поверхности атаки (данные в нескольких местах). Невозможно гарантировать согласованность копий. Сложность удаления данных по запросу (нужно найти и удалить все копии).

**Затронутые процессы:** Оплата, ведение медкарт, запись пациентов.

---

#### Проблема 12. Отсутствие Data Lineage
**Описание:** Невозможно отследить полный путь данных от момента их создания до текущего состояния. Неизвестно, какие трансформации данные претерпели и кто их изменял.

**Риск:** При инциденте безопасности невозможно определить масштаб утечки. Невозможно гарантировать целостность данных.

**Затронутые процессы:** Все процессы.
